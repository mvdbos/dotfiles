# Shared shell aliases for bash and zsh
# Source this from your shell's rc file

# Load platform detector if not already loaded
if [ -z "$PLATFORM_IS_DARWIN" ] && [ -f "$HOME/.dotfiles/platform_detector.bash" ]; then
    . "$HOME/.dotfiles/platform_detector.bash"
fi

# Platform-dependent aliases for ls and other coreutils
if [ "$PLATFORM_IS_DARWIN" -eq 1 ] 2>/dev/null; then
    alias ls='gls -F1B --group-directories-first --color=auto'
    alias rm='grm -I'
    alias mv='gmv -iu --strip-trailing-slashes'
    alias df='gdf -h --total'
    alias dir='gdir --color=auto'
    alias date='gdate'
else
    alias ls='ls -F1B --group-directories-first --color=auto'
    alias rm='rm -I'
    alias mv='mv -iu --strip-trailing-slashes'
    alias df='df -h --total'
    alias dir='dir --color=auto'
fi

# Color support aliases (vdir, grep variants)
alias vdir='vdir --color=auto'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# wget with custom config
alias wget='wget --execute ca_certificate=~/.config/certs/insg3_b64.cer --hsts-file=~/.config/wget/wget-hsts-db'

# Bat as cat replacement
alias cat='bat --style=snip'

# Silver searcher with hidden files
alias ag='ag --hidden'

# Job control aliases
alias j='jobs'
alias k1='kill %1'
alias k2='kill %2'
alias k3='kill %3'

# Common utilities
alias top='htop'
alias cp='cp -i'
alias mkdir='mkdir -pv'
alias diff='colordiff'
alias du='du -hc'
alias tree='tree -F'

# ls variations
alias l='ls'
alias lrt='ls -rt'
alias ll='ls -ohgBv --group-directories-first'
alias la='ls -lAhvG --group-directories-first'

# Git aliases
alias g='git'
alias ga='g add'
alias gap='g add -p'
alias gbl='g bl | grep -v year | grep -v month'
alias gbr='g brem | grep -v year | grep -v month'
alias gb='gbm'
alias gc='g ci'
alias gco='g co'
alias gd='clear && g diff'
alias gdm='g diff origin/master'
alias gf='g fetch --all'
alias gfp='g fetch && g pull --recurse-submodules && g delete-merged-branches && git-delete-squashed-branches'
alias gg='g gr'
alias gl='g lg'
alias glm='g lg origin/master..'
alias glc='g log -1 -u'
alias gp='g push'
alias gr='g rebase'
alias gs='g st'
alias gw="g log --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %C(white)%s %Cgreen(%cr)%Creset %C(blue)(%an)%Creset %n%+b' --stat --no-merges  --date=relative --ignore-all-space --ignore-blank-lines  --ignore-space-at-eol  --ignore-space-change"
alias gwip="git add . && git commit -m 'WIP' --no-verify  && git push"
alias git-delete-local-orphan-branches="git branch -vv | awk '\$1 != \"*\"' | awk '\$4 ~ /gone\]/ || \$3 !~ /\[origin\// {print \$1}' | xargs -p -n 1 git branch -D"
alias gdom="gd origin/master"
